{% extends 'index.html' %}

{% block titulo %}
Detalle de Grupos
{% endblock titulo %}

{% block body %}
<h3> {{ estudiante.nombre | upper }} {{ estudiante.apellidop | upper }} {{ estudiante.apellidom  | upper }}</h3>
{% if request.user.is_superuser %}
<div>
    <button class="btn btn-outline-primary" type="button" onclick="abrir_modal_creacion('{% url 'curso:crear_gruposdetallesadm' %}')">Agregar</button>
  </div>
  {% endif %}
{% if gruposdetalles %}
    <table class="table table-striped table-bordered">
        <thead class="thead-info">
            <th>Estudiante</th>
            <th>Folio</th>
            <th>Calificaci√≥n</th>
            <!-- <th>Opciones</th> -->
            {% for grupodetalle in gruposdetalles %}

        {%if forloop.first%}
          <h3>Periodo: {{ grupodetalle.idperiodo}}</h3>
          <h3 >Grupo: {{grupodetalle.idgrupo}}</h3> 
        </thead>
        <tbody>
          {%endif%}
                <tr>
                  {% if grupodetalle.foliopago.idestado.estado == 'Aceptado' %}
                    <td>{{ grupodetalle.idestudiante }}</td>
                    <td>{{ grupodetalle.foliopago }}</td>
                    <!-- <td>{{ grupodetalle.foliopago }}</td> -->
                    <td>{{ grupodetalle.calif }}</td>
                    {% if request.user.is_superuser %}
                    <td> <button onclick="abrir_modal_edicion('{% url 'ingles:editar_gruposdetalles' grupodetalle.id %}')" class="btn btn-outline-secondary">Editar</button></td>
                    <td><a href="{% url 'ingles:eliminar_gruposdetalles' grupodetalle.id %}" class="btn btn-outline-danger">Eliminar</a></td>
                    {% endif %}
                  {% endif %}
                  </tr>
        {% endfor %}
        </tbody>
        <!-- <td><a href="{% url 'ingles:crear_grupos' %}">Detalle</a></td> Page content<td><a href="{% url 'ingles:crear_grupos' %}">Agregar</a></td>-->
    </table>
    {% else %}
    <h1>No Existen Estudiantes Registrados en el Grupos</h1>
{% endif %}
<div class="modal fade" id="creacion" role="dialog">

</div>

<div class="modal fade" id="edicion" role="dialog">

</div>
{% endblock body %}
{% block extrajs %}
<script type="text/javascript">
  var $ = jQuery.noConflict();
  function abrir_modal_edicion(url){
    $('#edicion').load(url, function (){
      $(this).modal('show');
    });
  }
  function abrir_modal_creacion(url){
    $('#creacion').load(url, function (){
      $(this).modal('show');
    });
  } 
</script>
{% endblock extrajs %}  