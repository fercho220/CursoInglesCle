{% extends 'index.html' %}

{% block titulo %}
Listado de Pagos
{% endblock titulo %}

{% block body %}
<div>
  <button class="btn btn-outline-primary" type="button" onclick="abrir_modal_creacion('{% url 'curso:crear_pago'%}')">Agregar Pago</button>
</div>
{% if pagos %}
<div class="table-stats order-table ov-h">
  <table class="table table-striped table-bordered">
    <thead class="thead-info"> 
      <th>#</th> 
      <th>Materia</th>
      <th>Estudiante</th>
      <th>Periodo</th>
      <th>Fecha del Pago</th>
      <th>Fecha de Alta</th>
      <th>Opciones</th>
    </thead>
    <tbody>
      {% for pago in pagos %}
      <tr>
        {% if pago.idestado.estado == 'Pendiente' %}
        <td>{{ pago.foliopago }}</td> 
        <td>{{ pago.idmateria }}</td>
        <td>{{ pago.idestudiante }}</td>
        <td>{{ pago.idperiodo }}</td>
        <td>{{ pago.fechapago }}</td>
        <td>{{ pago.fechasist }}</td>
        <!-- <td>{{ pago.pagocurso }}</td> -->
        <td> 
          <button onclick="abrir_modal_edicion('{% url 'ingles:editar_pago' pago.foliopago %}')" class="btn btn-outline-secondary">Editar</button>
          {% if request.user.is_superuser %}
          <a href="{% url 'ingles:eliminar_pago' pago.foliopago %}" class="btn btn-outline-danger">Eliminar</a>
                  {% endif %}
                </td> 
                {% endif %}
            </tr>
                {% endfor %}    
        </tbody>
    </table>
    {% else %}
    <h1>No Existe Pagos Registrados</h1>
</div>
    
{% endif %}
<div class="modal fade" id="creacion" role="dialog">

</div>

<div class="modal fade" id="edicion" role="dialog">

</div>
{% endblock body %}
{% block extrajs %}
<script type="text/javascript">
  var $ = jQuery.noConflict();
  function abrir_modal_edicion(url){
    $('#edicion').load(url, function (){
      $(this).modal('show');
    });
  }
  function abrir_modal_creacion(url){
    $('#creacion').load(url, function (){
      $(this).modal('show');
    });
  } 
</script>
{% endblock extrajs %}  